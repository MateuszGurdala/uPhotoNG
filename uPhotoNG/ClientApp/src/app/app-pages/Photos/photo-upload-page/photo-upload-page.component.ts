import {
  Component,
  ElementRef,
  OnInit,
  Renderer2,
  ViewChild,
} from '@angular/core';
import { ToastrService } from 'ngx-toastr';
import { FileHttpData } from 'src/app/services/interfaces';
import FileHandler from '../../../services/file-handler.service';
import AppPageBase from '../../app-page-base';

@Component({
  selector: 'app-photo-upload-page',
  templateUrl: './photo-upload-page.component.html',
  styleUrls: ['./photo-upload-page.component.css'],
})
export class PhotoUploadPageComponent extends AppPageBase implements OnInit {
  @ViewChild('dropzone') dropZone: ElementRef;
  ifContainerEmpty: boolean = true;
  filesHTTPData: FileHttpData[] = [] as FileHttpData[];

  constructor(
    private renderer: Renderer2,
    private toastr: ToastrService,
    private fileHandler: FileHandler
  ) {
    super();
    this.setTitle('Upload photos');

    let file = {} as FileHttpData;
    file.MIMEType = "image/jpeg";
    file.base64 = "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";
    file.fileName = "download.jpg";
    file.size = 7996;
    this.filesHTTPData.push(file);
    this.ifContainerEmpty = false;
  }

  ngOnInit(): void {}

  onDragEnter(event: DragEvent) {
    event.preventDefault();
    this.renderer.setStyle(
      this.dropZone.nativeElement,
      'color',
      'var(--accent)'
    );
  }

  onDragOver(event: DragEvent) {
    event.preventDefault();
  }

  onDragLeave(event: any) {
    event.preventDefault();
    if (!this.dropZone.nativeElement.contains(event.fromElement)) {
      this.renderer.setStyle(
        this.dropZone.nativeElement,
        'color',
        'var(--text-gray)'
      );
    }
  }

  onClick() {
    if(!this.ifContainerEmpty) return;
    let input = document.createElement('input');
    input.type = 'file';
    input.onchange = () => {
      if (input.files !== null) {
        this.handleFiles(input.files);
      }
    };
    input.click();
  }

  onDrop(event: DragEvent) {
    event.preventDefault();

    this.renderer.setStyle(
      this.dropZone.nativeElement,
      'color',
      'var(--text-gray)'
    );

    let files: FileList | undefined = event.dataTransfer?.files;

    if (typeof files !== 'undefined') {
      this.handleFiles(files);
    }
  }

  handleFiles(files: FileList) {
    if (!this.fileHandler.checkMIMETypes(files)) {
      this.toastr.info('Currently accepted MIME types: image/jpeg, image/png.');
      this.toastr.error('Some files are of incorrect type.');
    } else {
      this.ifContainerEmpty = false;
      [...files].forEach(async (file, i) => {
        let data = await this.fileHandler.getHTTPFile(file);
        this.filesHTTPData.push(data);
      });
    }
  }
}
